---
import { projects } from '../data/projects';
import IconPill from '../components/IconPill.astro';
import ArticleContainer from '../components/ArticleContainer.astro';
---

<ArticleContainer title="Proyectos" articleId="projects">
    <div class="flex flex-col gap-12 sm:gap-14">
        {projects.map((project) => (
            <section class="flex flex-col">
                <!-- Project Header -->
                <header class="flex flex-col sm:flex-row gap-4 sm:gap-6 items-start sm:items-center mb-6 sm:mb-8">
                    <h3 class="text-2xl sm:text-3xl lg:text-4xl font-bold">{project.title}</h3>
                    
                    <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 w-full sm:w-auto">
                        {project.url && (
                            <a href={project.url} target="_blank" rel="noreferrer" class="flex gap-2 items-center">
                                <IconPill>
                                    <img src="icons/github.svg" alt="GitHub icon" class="w-4 sm:w-5 hover:scale-110 transition-transform" loading="lazy" />
                                    <p class="ml-2 text-sm sm:text-base">Ver en GitHub</p>
                                </IconPill>
                            </a>
                        )}
                        {project.production_url && (
                            <a href={project.production_url} target="_blank" rel="noreferrer" class="flex gap-2 items-center">
                                <IconPill>
                                    <img src="icons/link.svg" alt="External link icon" class="w-4 sm:w-5" loading="lazy" />
                                    <p class="ml-2 text-sm sm:text-base">Ver en producci√≥n</p>
                                </IconPill>
                            </a>
                        )}
                    </div>
                </header>

                <!-- Project Content -->
                <main class="flex flex-col lg:flex-row items-start gap-6 lg:gap-8">
                    {project.image && (
                        <div class="w-full lg:w-auto flex justify-center lg:justify-start">
                            <img 
                                src={project.image || "/placeholder.svg"} 
                                alt={project.title} 
                                class="w-full max-w-[280px] sm:max-w-[320px] lg:w-[200px] rounded-lg transform -rotate-1 hover:rotate-0 transition-transform duration-300 ease-in-out" 
                                loading="lazy" 
                            />
                        </div>
                    )}
                    
                    <div class="flex-1">
                        <p class="text-base sm:text-lg leading-relaxed mb-6 sm:mb-8">{project.description}</p>
                        
                        <!-- Technologies -->
                        <div class="flex flex-row flex-wrap gap-2 sm:gap-3">
                            {project.technologies.map((technology) => (
                                <IconPill key={technology.name}>
                                    <img src={technology.source || "/placeholder.svg"} alt={`${technology.name} logo`} class="w-3 sm:w-4" loading="lazy" />
                                    <p class="pl-2 text-sm sm:text-base">{technology.name}</p>
                                </IconPill>
                            ))}
                        </div>
                        
                        <!-- Date -->
                        <p class="text-sm sm:text-base text-gray-400 mt-4">{project.date}</p>
                    </div>
                </main>
            </section>
        ))}
    </div>
</ArticleContainer>
